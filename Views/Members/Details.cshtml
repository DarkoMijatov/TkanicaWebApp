@model TkanicaWebApp.Models.Member

@{
    ViewData["Title"] = "Podaci o članu";
    string active = Model.Active ? "da" : "ne";
    int rehearsalCount = Model.RehearsalMembers.Count;
    List<Rehearsal> rehearsals = Model.RehearsalMembers.Select(x => x.Rehearsal).ToList();
    decimal debtAmount = Model.Transactions.Where(x => x.TransactionTypeId == 1 && !x.Paid).Sum(x => x.Amount);
    List<Transaction> transactions = Model.Transactions;
}

<h1>Podaci o članu</h1>

<div>
    <hr />
    <dl class="row">
        <dt class = "col-sm-2">
            Ime
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.FirstName)
        </dd>
        <dt class = "col-sm-2">
            Prezime
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.LastName)
        </dd>
        <dt class = "col-sm-2">
            Datum rođenja
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.DateOfBirth)
        </dd>
        <dt class = "col-sm-2">
            Datum upisa
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.DateOfEntry)
        </dd>
        <dt class = "col-sm-2">
            Aktivan
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => active)
        </dd>
        <dt class = "col-sm-2">
            Telefon
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.Phone)
        </dd>
        <dt class = "col-sm-2">
            Email
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.Email)
        </dd>
        <dt class = "col-sm-2">
            Adresa
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.Address)
        </dd>
        <dt class = "col-sm-2">
            Grad
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.City)
        </dd>
        <dt class = "col-sm-2">
            Škola
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.School)
        </dd>
        <dt class = "col-sm-2">
            Razred
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.Class)
        </dd>
        <dt class = "col-sm-2">
            Godine iskustva
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.YearsOfExperience)
        </dd>
        <dt class = "col-sm-2">
            Facebook
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.FacebookProfileUrl)
        </dd>
        <dt class = "col-sm-2">
            Instagram
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.InstagramProfileUrl)
        </dd>
        <dt class = "col-sm-2">
            TikTok
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.TikTokProfileUrl)
        </dd>
        <dt class = "col-sm-2">
            Fotografija
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.ProfilePicture)
        </dd>
        <dt class="col-sm-2">
            Grupa
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.MembershipFee.MemberGroup.Name)
        </dd>
        <dt class = "col-sm-2">
            Iznos članarine
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.MembershipFee.Amount)
        </dd>
        <dt class="col-sm-2">
            Dugovanje
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => debtAmount)
        </dd>
        <dt class="col-sm-2">
            Broj proba
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => rehearsalCount)
        </dd>
        <dt class="col-sm-2">
            Probe:
        </dt>
        <dd class="col-sm-10">
            <ul>
                @foreach (var rehearsal in rehearsals)
                {
                    <li>
                        <a asp-controller="Rehearsals" asp-action="Details" asp-route-id="@rehearsal.Id">@Html.DisplayFor(model => rehearsal.Date)</a>
                    </li>
                }
            </ul>
        </dd>
        <dt class="col-sm-2">
            Transakcije:
        </dt>
        <dd class="col-sm-10">
            <ul>
                @foreach (var transaction in transactions)
                {
                    var transactionText = (transaction.TransactionNumber != "" ? transaction.TransactionNumber : transaction.Amount.ToString()) + (!transaction.Paid ? " (neplaćena)" : "") + " (" + transaction.TransactionType.Name + ")";
                    <li>
                        <a asp-controller="Transactions" asp-action="Details" asp-route-id="@transaction.Id">@Html.DisplayFor(model => transactionText)</a>
                    </li>
                }
            </ul>
        </dd>
        <dt class = "col-sm-2">
            Datum poslednje izmene
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.UpdatedAt)
        </dd>
    </dl>
</div>
<div>
    <a asp-action="Edit" asp-route-id="@Model?.Id">Izmena</a> |
    <a asp-action="Index">Povratak na listu</a>
</div>
